<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offerte Amazon | shoppingal</title>
    <style>
        /* STILE SFONDO PERSONALIZZATO */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-image: url('https://img.freepik.com/vettori-gratuito/banner-astratto-con-un-design-di-comunicazioni-di-rete-low-poly-plesso_1048-12914.jpg');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            background-color: #f0f2f5;
        }

        /* CONTENITORE PRINCIPALE */
        .main-container {
            max-width: 1200px;
            margin: 20px auto;
            background-color: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.1);
        }

        h1 { 
            color: #FF9900; 
            text-align: center; 
            margin-bottom: 30px; 
        }
        .category-section { 
            margin: 40px 0; 
        }
        .category-title { 
            background: #232F3E; 
            color: white; 
            padding: 12px 15px; 
            border-radius: 5px; 
            font-size: 1.3em;
            display: flex;
            align-items: center;
        }
        .product-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 20px; 
            margin-top: 15px;
        }
        .product-card { 
            border: 1px solid #ddd; 
            border-radius: 8px; 
            padding: 15px; 
            transition: transform 0.3s;
            background: white;
            position: relative;
        }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .product-img { width: 100%; height: 180px; object-fit: contain; margin-bottom: 10px; }
        .product-title { font-weight: bold; margin: 8px 0; color: #0066c0; }
        .product-price { color: #B12704; font-weight: bold; font-size: 1.1em; }
        .prime-badge { color: #00A8E1; font-weight: bold; font-size: 0.9em; margin: 5px 0; }
        .buy-btn { 
            background: #FFD814; 
            color: #0F1111; 
            padding: 8px 15px; 
            text-decoration: none; 
            border-radius: 4px; 
            display: inline-block; 
            margin-top: 10px;
            border: 1px solid #FCD200;
            font-weight: bold;
            text-align: center;
        }
        .nav { 
            display: flex; 
            justify-content: center; 
            flex-wrap: wrap;
            margin: 20px 0 40px;
            gap: 10px;
        }
        .nav a { 
            padding: 8px 15px; 
            background: #EAEDED; 
            color: #0F1111; 
            text-decoration: none; 
            border-radius: 4px; 
            font-size: 0.9em;
        }
        .nav a:hover { background: #D5DBDB; }
        footer { margin-top: 50px; text-align: center; font-size: 0.9em; color: #555; padding-top: 20px; border-top: 1px solid #ddd; }
        
        /* STILE PULSANTI E INPUT */
        #convert-btn {
            background: #232F3E;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
            font-weight: bold;
        }
        #convert-btn:hover {
            background: #FF9900;
        }
        #amazon-url-input {
            padding: 10px;
            width: 70%;
            max-width: 500px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-right: 10px;
        }
        #amazon-url-input:focus {
            outline: none;
            border-color: #FF9900;
        }
        #add-product-btn {
            padding: 10px 15px;
            background: #FF9900;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        #add-product-btn:hover {
            background: #e68a00;
        }
        .url-converter-container {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        /* NUOVI STILI */
        .product-reviews {
            margin: 8px 0;
            color: #555;
            font-size: 0.9em;
        }
        .rating {
            color: #0F1111;
            font-weight: bold;
        }
        .star-icon {
            color: #FFA41C;
        }
        .review-count {
            color: #555;
        }
        .time-deal {
            background: #CC0C39;
            color: white;
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 0.8em;
            margin: 0 5px;
        }
        .original-price {
            color: #888;
            text-decoration: line-through;
            margin-left: 5px;
            font-size: 0.9em;
        }
        .delete-product {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
        }
        .delete-product:hover {
            background: #cc0000;
        }
        .product-category-select {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            margin: 10px 5px;
            width: 200px;
        }
        .product-subcategory-input {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            margin: 10px 5px;
            width: 200px;
        }
        .form-group {
            margin: 10px 0;
        }
        .manual-data-input {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #f1f1f1;
            border-radius: 5px;
        }
        .manual-data-input input,
        .manual-data-input textarea {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .toggle-manual-btn {
            background: none;
            border: none;
            color: #0066c0;
            cursor: pointer;
            text-decoration: underline;
            margin: 5px 0;
        }
        #product-custom-category {
            display: none;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <h1>üõçÔ∏è Offerte Amazon per Categoria</h1>
        
        <!-- PULSANTE DI CONVERSIONE + BARRA URL -->
        <button id="convert-btn">üîó Converti tutti i link in affiliati</button>
        
        <div class="url-converter-container">
            <input 
                type="text" 
                id="amazon-url-input" 
                placeholder="Incolla URL Amazon qui..."
            >
            <button id="add-product-btn">Aggiungi Prodotto</button>
            <p><small>Inserisci un link Amazon per convertirlo e aggiungere il prodotto alla pagina</small></p>
            
            <button class="toggle-manual-btn" id="toggle-manual-btn">+ Inserimento manuale dati</button>
            
            <div class="manual-data-input" id="manual-data-input">
                <div class="form-group">
                    <input type="text" id="product-title-input" placeholder="Titolo prodotto">
                </div>
                <div class="form-group">
                    <input type="text" id="product-image-input" placeholder="URL immagine">
                </div>
                <div class="form-group">
                    <input type="text" id="product-price-input" placeholder="Prezzo (es. ‚Ç¨29,99)">
                </div>
                <div class="form-group">
                    <input type="text" id="product-original-price-input" placeholder="Prezzo originale (opzionale)">
                </div>
                <div class="form-group">
                    <input type="text" id="product-rating-input" placeholder="Valutazione (es. 4.5)">
                </div>
                <div class="form-group">
                    <input type="text" id="product-reviews-input" placeholder="Numero recensioni (es. 125)">
                </div>
                <div class="form-group">
                    <label for="prime-checkbox">
                        <input type="checkbox" id="prime-checkbox"> Prime
                    </label>
                </div>
                <div class="form-group">
                    <label for="time-deal-checkbox">
                        <input type="checkbox" id="time-deal-checkbox"> Offerta a tempo
                    </label>
                </div>
            </div>
            
            <div class="form-group">
                <select id="product-category" class="product-category-select">
                    <option value="elettronica">Elettronica</option>
                    <option value="casa">Casa</option>
                    <option value="libri">Libri</option>
                    <option value="bellezza">Salute e bellezza</option>
                    <option value="giardino">Giardino</option>
                    <option value="sport">Sport</option>
                    <option value="giochi-e-giocattoli">Giochi e giocattoli</option>
                    <option value="other">Altra categoria</option>
                </select>
                
                <div id="product-custom-category">
                    <input type="text" id="custom-category-input" placeholder="Nome nuova categoria">
                </div>
            </div>
            
            <div class="form-group">
                <input type="text" id="product-subcategory" class="product-subcategory-input" placeholder="Sottocategoria (opzionale)">
            </div>
        </div>
        
        <!-- Navigazione rapida -->
        <div class="nav">
            <a href="#elettronica">üéÆ Elettronica</a>
            <a href="#casa">üè† Casa</a>
            <a href="#libri">üìö Libri</a>
            <a href="#bellezza">üíÑ Salute e bellezza</a>
            <a href="#giardino">üåø Giardino</a>
            <a href="#sport">‚öΩ Sport</a>
            <a href="#giochi-e-giocattoli">üéÆ Giochi e giocattoli</a>
        </div>

        <!-- Sezione ELETTRONICA -->
        <div id="elettronica" class="category-section">
            <h2 class="category-title"><i>üéÆ</i> Elettronica</h2>
            
            <!-- Sottocategoria Smartphone -->
            <div class="subcategory">
                <h3>Smartphone e Accessori</h3>
                <div class="product-grid">
                    <div class="product-card">
                        <img src="https://m.media-amazon.com/images/I/61bK6PMOC3L._AC_UL320_.jpg" alt="iPhone 16 Pro" class="product-img">
                        <div class="product-title">iPhone 16 Pro 128GB</div>
                        <div class="prime-badge">‚úî Con Prime</div>
                        <div class="product-price">‚Ç¨1.059,00</div>
                        <a href="https://www.amazon.it/dp/B0DGJ2WT1R?tag=shoppingal-21" class="buy-btn" target="_blank">Vedi offerta</a>
                    </div>
                    
                    <div class="product-card">
                        <img src="https://m.media-amazon.com/images/I/71+kSot5vOL._AC_SY300_SX300_.jpg" alt="TAURI 3 in 1 Kit Magnetica Cover per iPhone 16 Pro" class="product-img">
                        <div class="product-title">TAURI 3 in 1 Kit Magnetica Cover per iPhone 16 Pro [Compatibile con MagSafe] con 2 Pellicola in Vetro Temperato, Custodia Rigida per Sottile Anticaduta - Trasparente</div>
                        <div class="prime-badge">‚úî Con Prime</div>
                        <div class="product-price">A soli ‚Ç¨12,74 con coupon 15% <span class="original-price">invece di 14,99‚Ç¨</span></div>
                        <a href="https://www.amazon.it/TAURI-iPhone-16-Pro-Compatibile/dp/B0D875HKQB?__mk_it_IT=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=F24202CQGJ6O&dib=eyJ2IjoiMSJ9.4l5WbfbJJf4us_Ucvtgiol5Wh5FKY_GQkZJnoas5Lf9kIiGvEsq3-sCJRQx9qsFQ0YXwYun3GgA6gyuxO0nnrcY-ycjXZThcL9NJM9UlAe6LIe1aKohdgZbYehZVxrfh0jmNohBq30v-6sVrc5x6MH8JmW5r0ZO9TSSr4NtjMbZJ0PF789CNWlj6ePqP3yeTDwWZSoQgyXP_z38M8jd5bqMCHmx9Wq0svHKtzTVgOy56J6ZRByGsw0ap6LN7JX4yqmDCqD5-IggqsQu2I2pl0PjFxGLmUXmcU16U5MrT_mU.S0LySNNBcqGM3FZK4TqIQ0jstJqDuBPeQpRxLXZlXC4&dib_tag=se&keywords=custodia+iphone+16+pro&qid=1746523178&sprefix=custodia+iphone+16+pro+,aps,121&sr=8-6&linkCode=sl1&tag=shoppingal-21&linkId=ad1a1924d8d6cd04c1c5b19689febd25&language=it_IT&ref_=as_li_ss_tl√†" class="buy-btn" target="_blank">Vedi offerta</a>
                    </div>
                    
                    <div class="product-card" data-asin="B0761TXFHY">
                    <button class="delete-product" onclick="deleteProduct('B0761TXFHY')">√ó</button>
                    <img src="https://m.media-amazon.com/images/I/71ZSAxzM5AL._AC_SX679_.jpg" alt="Moulinex Vitapress Spremiagrumi, Ampia Capacit√† da 1 L, Due Filtri, Estrazione Ottimale del Succo, Facile da Usare, Copertura Protettiva, Cavo Lungo, PC3028" class="product-img" onerror="this.src='https://via.placeholder.com/200?text=Immagine+non+disponibile'">
                    <div class="product-title">Moulinex Vitapress Spremiagrumi, Ampia Capacit√† da 1 L, Due Filtri, Estrazione Ottimale del Succo, Facile da Usare, Copertura Protettiva, Cavo Lungo, PC3028</div>
                    <div class="prime-badge">‚úî Con Prime</div>
                    
                        <div class="product-reviews">
                            <span class="rating">4</span>
                            <i class="star-icon">‚òÖ</i>
                            <span class="review-count">15.227 voti</span>
                        </div>
                    
                    <div class="product-price">A soli -46% 19,99‚Ç¨ <span class="time-deal">Offerta a tempo</span> <span class="original-price">invece di 51,99</span></div>
                    <a href="https://www.amazon.it/Moulinex-Vitapress-Spremiagrumi-Estrazione-Protettiva/dp/B0761TXFHY/ref=sr_1_1?__mk_it_IT=%C3%85M%C3%85%C5%BD%C3%95%C3%91&amp;crid=3G6BYM0WAD2WN&amp;dib=eyJ2IjoiMSJ9.LCS20-N3FGCBOFf0j1CtkOsJcAc3qgCxggBMbLQW-n8pEDHg57ias5PgLUrg1c0zO2PKaqKwvFB96joPbZrHVnpEj9yDZwvCwja2DumG6PFHL2zeyvx40Ql6Rl5hCencbteUd2PYho60J6ofOIz3ROoDwSUjd5TBccPS7LiL3mlaiOzYMrYZ5blANW3x8KuIH6UF6jDB6C7qhiuWc3R72PyTOHRuLcAHha2tK4dpKVGFuFobXxR_ZDW1EWga5ZJL3lcCePtPtHeTlyDIGCh87IiXyh3ZnY8faGlkl95W-ZM.BHdbH2cUxM4ImJtl4XhmOaStBQAPBMuiqUaZa0nU1E8&amp;dib_tag=shoppingal-21&amp;keywords=Moulinex%2BVitapress%2BSpremiagrumi%2C%2BAmpia%2BCapacit%C3%A0%2Bda%2B1%2BL%2C%2BDue%2BFiltri%2C%2BEstrazione%2BOttimale%2Bdel%2BSucco%2C%2BFacile%2Bda%2BUsare%2C%2BCopertura%2BProtettiva%2C%2BCavo%2BLungo%2C%2BPC3028&amp;qid=1756975140&amp;sprefix=moulinex%2Bvitapress%2Bspremiagrumi%2C%2Bampia%2Bcapacit%C3%A0%2Bda%2B1%2Bl%2C%2Bdue%2Bfiltri%2C%2Bestrazione%2Bottimale%2Bdel%2Bsucco%2C%2Bfacile%2Bda%2Busare%2C%2Bcopertura%2Bprotettiva%2C%2Bcavo%2Blungo%2C%2Bpc3028%2Caps%2C167&amp;sr=8-1&amp;th=1" class="buy-btn" target="_blank">Vedi offerta</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sezione CASA -->
        <div id="casa" class="category-section">
            <h2 class="category-title"><i>üçé</i> Alimentari</h2>

            <!-- Sottocategoria Alimenti -->
            <div class="subcategory">
                <h3>Pasta</h3>
                <div class="product-grid">
                    <div class="product-card">
                        <img src="https://m.media-amazon.com/images/I/71iuES99hOL._AC_SX679_.jpg" alt="Pasta" class="product-img">
                        <div class="product-title">Barilla Pasta Penne Rigate N.73, Pasta Corta di Semola di Grano Duro, I Classici, 500g</div>
                        <div class="prime-badge">‚úî Con Prime</div>
                        <div class="product-price">Offerta a tempo ‚Ç¨0,59</div>
                        <a href="https://www.amazon.it/Barilla-Pasta-Penne-Rigate-Semola/dp/B003CJC3A6/ref=sr_1_1?dib=eyJ2IjoiMSJ9.Z2xONjaZyVKfnQjrqoYpmvLz2SutwxJHKXG04U1exj_W5SkdTmZ2DX4hRVD_kbnmZNJGn2r5L-i3PNVIpIHauyKLDsDJUhXKUAt7kjI_g9nHsCe4y6bvDLbEn1yP7P5Uj1HTBfpcXuCzoI3_6VR0Lok_A04zJL5cQwi9vFT6wI0FPpjYmo6LL3_HXQkJpyalKACkqPnHothY-OQ_iwo6XlkcPGXEPQS1Qy1zrmsThJIW4GWOm7iZSgsrrRM3Pn4bfa7b6DoEYqYoxCpyE_rzolyIBjnYTIT-iYKokFoIJ5U.Z0iQfLVa3Y_mkL7EmButF5MCZQ5qHhjp7dTlJHqTuys&dib_tag=se&keywords=Barilla%2BPasta%2BPenne%2BRigate%2BN.73%2C%2BPasta%2BCorta%2Bdi%2BSemola%2Bdi%2BGrano%2BDuro%2C%2BI%2BClassici%2C%2B500g&qid=1746541359&sr=8-1&th=1" class="buy-btn" target="_blank">Vedi offerta</a>
                    </div>

                    <div class="product-card">
                        <img src="https://m.media-amazon.com/images/I/51+skG3VZKL._AC_SY300_SX300_.jpg" alt="Barilla Spaghetti N 5 di Semola di Grano Duro, 500" class="product-img">
                        <div class="product-title">Barilla Spaghetti N 5 di Semola di Grano Duro, 500g</div>
                        <div class="prime-badge">‚úî Con Prime</div>
                        <div class="product-price">‚Ç¨0,59</div>
                        <a href="https://www.amazon.it/Barilla-Pasta-Spaghetti-Semola-Grano/dp/B015CG1C44/ref=pd_bxgy_thbs_d_sccl_2/260-9222100-8003255?pd_rd_w=Flt9h&content-id=amzn1.sym.bebcaae8-85b9-4944-951b-8428874a124f&pf_rd_p=bebcaae8-85b9-4944-951b-8428874a124f&pf_rd_r=BV2ZEN0AZETGRZ0QV0KX&pd_rd_wg=la9yr&pd_rd_r=6bb8aa18-17ca-4a1e-984d-4de7f90539a2&pd_rd_i=B015CG1C44&th=1" class="buy-btn" target="_blank">Vedi offerta</a>
                    </div> 
                    
                    <div class="product-card">
                       <img src="https://m.media-amazon.com/images/I/516B7WxWcbL.__AC_SX300_SY300_QL70_ML2_.jpg" alt="Barilla Pasta Farfalle N.265, Pasta Corta di Semol" class="product-img">
                       <div class="product-title">Barilla Pasta Farfalle N.265, Pasta Corta di Semola di Grano Duro, I Classici, 500g</div>
                       <div class="prime-badge">‚úî Con Prime</div>
                       <div class="product-price">‚Ç¨0,59</div>
                       <a href="https://www.amazon.it/Barilla-Pasta-Farfalle-Semola-Grano/dp/B003UM7Z1M/ref=pd_bxgy_thbs_d_sccl_1/260-9222100-8003255?pd_rd_w=CEmzX&content-id=amzn1.sym.bebcaae8-85b9-4944-951b-8428874a124f&pf_rd_p=bebcaae8-85b9-4944-951b-8428874a124f&pf_rd_r=3VM87SRC1EFDBC42YRWW&pd_rd_wg=L6WJR&pd_rd_r=32bbe115-1345-431b-9a0b-a773098f0770&pd_rd_i=B003UM7Z1M&psc=1" class="buy-btn" target="_blank">Vedi offerta</a>
                    </div>
                    
                    <div class="product-card">
                       <img src="https://m.media-amazon.com/images/I/81VPN-e9d0L._AC_SX522_.jpg" alt="Barilla Pasta Farfalle N.265, Pasta Corta di Semol" class="product-img">
                       <div class="product-title">Tennent's Super Birra, Bottiglia - Pacco da 24 x 355 ml</div>
                       <div class="prime-badge">‚úî Con Prime</div>
                       <div class="product-price">‚Ç¨-8% 32,79</div>
                       <a href="https://amzn.to/3JLQeRN" class="buy-btn" target="_blank">Vedi offerta</a>
                   </div>
                </div>
            </div>
        </div>

        <!-- Sezione Casa -->
        <div id="bellezza" class="category-section">
            <h2 class="category-title"><i>üè†</i> Casa</h2>
            
            <div class="subcategory">
                <h3>Detersivi e Igiene</h3>
                <div class="product-grid">
                    <div class="product-card">
                        <img src="https://m.media-amazon.com/images/I/81eRONgl22L.__AC_SX300_SY300_QL70_ML2_.jpg" alt="Dash Power Detersivo Liquido Lavatrice, 80 Lavaggi" class="product-img">
                        <div class="product-title">Dash Power Detersivo Liquido Lavatrice, 80 Lavaggi (4x20), Freschezza Di Lenor, Risveglio Primaverile, rimuove addirittura gli odori di sudore vecchi di 7 giorni, per una pulizia impeccabile</div>
            
                        <div class="product-reviews">
                            <span class="rating">4,6</span>
                            <i class="star-icon">‚òÖ</i>
                            <span class="review-count">1.381 voti</span>
                        </div>
            
                        <div class="prime-badge">‚úî Con Prime</div>
                        <div class="product-price">A soli ‚Ç¨24,99 <span class='time-deal'>Offerta a tempo</span> <span class='original-price'>invece di 39,99‚Ç¨</span></div>
                        <a href="https://www.amazon.it/dp/B0DZ2XWBP7/ref=cm_sw_r_as_gl_apa_gl_i_dl_YQ0988SREX3PT2PW5QWF?linkCode=ml1&tag=shoppingal-21&th=1" class="buy-btn" target="_blank">Vedi offerta</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sezione GIOCHI E GIOCATTOLI -->
        <div id="giochi-e-giocattoli" class="category-section">
            <h2 class="category-title"><i>üéÆ</i> Giochi e giocattoli</h2>

            <!-- Sottocategoria Prodotti vari -->
            <div class="subcategory">
                <h3>Accessori</h3>
                <div class="product-grid">
                    
                <div class="product-card">
            <img src="https://m.media-amazon.com/images/I/61zpyr5zCnL.__AC_SX300_SY300_QL70_ML2_.jpg" alt="SteelSeries Arctis Nova 5P - Cuffie PS5 Wireless -" class="product-img">
            <div class="product-title">SteelSeries Arctis Nova 5P - Cuffie PS5 Wireless - Driver magnetici al neodimio - 100+ preset audio - Batteria 60 HR - 2,4GHz o BT - Microfono ClearCast Gen2.X - PlayStation 5, PC, Cellulare</div>
            
            <div class="product-reviews">
                <span class="rating">4,4</span>
                <i class="star-icon">‚òÖ</i>
                <span class="review-count">141 voti</span>
            </div>
            
            <div class="prime-badge">‚úî Con Prime</div>
            <div class="product-price">A soli ‚Ç¨99,99 <span class='time-deal'>Offerta a tempo</span> <span class='original-price'>invece di 153,40‚Ç¨</span></div>
            <a href="https://www.amazon.it/SteelSeries-Arctis-Nova-Wireless-schwarz/dp/B0D1KCF7L2/ref=sr_1_2?__mk_it_IT=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=1338WM4BHW467&dib=eyJ2IjoiMSJ9.uay_Z7EcblyM6x7Mred_EVeWy8rL6YxNGtAZb4UXE5udCBi0DS7ZTDgYoLoD8VUq3CznHQYE-g2xd6qy9sATIWQGuzeueKRRto1WBD-9qCDZvkZg7sqrpg4mBRIQ-iMqmF-zLQiObbY3FPPX6FiGKO7V41Xhz0pRf-XoNzSCnfB8MgTSGx48r80Lfba5Rekc.tt17PkHPZwEbH8zStW6EWEIEuX3_Uyn31y9pghOBbuI&dib_tag=se&keywords=SteelSeries%2BArctis%2BNova%2B5P%2B-%2BCuffie%2BPS5%2BWireless%2B-%2BDriver%2Bmagnetici%2Bal%2Bneodimio%2B-%2B100%2B%2Bpreset%2Baudio%2B-%2BBatteria%2B60%2BHR%2B-%2B2%2C4GHz%2Bo%2BBT%2B-%2BMicrofono%2BClearCast%2BGen2.X%2B-%2BPlayStation%2B5%2C%2BPC%2C%2BCellulare&psr=EY17&qid=1746550910&s=todays-deals&sprefix=steelseries%2Barctis%2Bnova%2B5p%2B-%2Bcuffie%2Bps5%2Bwireless%2B-%2Bdriver%2Bmagnetici%2Bal%2Bneodimio%2B-%2B100%2B%2Bpreset%2Baudio%2B-%2Bbatteria%2B60%2Bhr%2B-%2B2%2C4ghz%2Bo%2Bbt%2B-%2Bmicrofono%2Bclearcast%2Bgen2.x%2B-%2Bplaystation%2B5%2C%2Bpc%2C%2Bcellulare%2Ctodays-deals%2C200&sr=1-2&th=1" class="buy-btn" target="_blank">Vedi offerta</a>
        </div>
        
                </div>
            </div>
        </div>

                <!-- Sezione Elettrodomestici -->
        <div id="casa" class="category-section">
            <h2 class="category-title"><i>üè†</i> Elettrodomestici</h2>

            <!-- Sottocategoria Elettrodomestici -->
            <div class="subcategory">
                <h3>Elettrodomestici</h3>
                <div class="product-grid">
                    <div class="product-card">
                        <img src="https://m.media-amazon.com/images/I/71PZfV4rttL._AC_SX522_.jpg" alt="Asciugatrice" class="product-img">
                        <div class="product-title">Electrolux Asciugatrice 600 GentleCare 9 kg</div>
                        <div class="prime-badge">‚úî Con Prime</div>
                        <div class="product-price">Offerta a tempo ‚Ç¨569,05</div>
                        <a href="https://amzn.to/3YsDJiA" class="buy-btn" target="_blank">Vedi offerta</a>

                </div>
            </div>
        </div>

        <!-- Sezione LIBRI -->
        <div id="libri" class="category-section">
            <h2 class="category-title"><i>üìö</i> Libri</h2>
            
            <div class="subcategory">
                <h3>Giochi e quiz</h3>
                <div class="product-grid">
                    <div class="product-card">
                        <img src="https://m.media-amazon.com/images/I/61a-y03nTNL._SY425_.jpg" alt="Libro" class="product-img">
                        <div class="product-title">La logica degli enigmi. Giochi, rompicapi e sfide</div>
                        <div class="prime-badge">‚úî Con Prime</div>
                        <div class="product-price">-5% ‚Ç¨18,90</div>
                        <a href="https://amzn.to/4iRZC25" class="buy-btn" target="_blank">Vedi offerta</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sezione SPORT -->
        <div id="sport" class="category-section">
            <h2 class="category-title"><i>‚öΩ</i> Sport e tempo libero</h2>
            
            <div class="subcategory">
                <h3>Fitness e palestra</h3>
                <div class="product-grid">
                    <div class="product-card">
                        <img src="https://m.media-amazon.com/images/I/7133MgkKegL._AC_SX679_.jpg" alt="Tapis Roulant" class="product-img">
                        <div class="product-title">Tapis Roulant Elettrico con Inclinazione</div>
                        <div class="product-price">con coupon sconto di ‚Ç¨100,00 ‚Ç¨349,99</div>
                        <a href="https://amzn.to/3GSWS74" class="buy-btn" target="_blank">Vedi offerta</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sezione GIARDINO -->
        <div id="giardino" class="category-section">
            <h2 class="category-title"><i>üåø</i> Giardino</h2>
            
            <div class="subcategory">
                <h3>Attrezzi da Giardinaggio</h3>
                <div class="product-grid">
                    <div class="product-card">
                        <img src="https://m.media-amazon.com/images/I/619qKD2agbL._AC_SX679_.jpg" alt="Idropulitrice" class="product-img">
                        <div class="product-title">K√§rcher Idropulitrice K 7 Premium</div>
                        <div class="prime-badge">‚úî Con Prime</div>
                        <div class="product-price">-6% offerta a tempo ‚Ç¨499,99</div>
                        <a href="https://amzn.to/4k8NNFO" class="buy-btn" target="_blank">Vedi offerta</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- SCRIPT PRINCIPALE -->
        <script>
            const REFERRAL_ID = "shoppingal-21";
            let products = JSON.parse(localStorage.getItem('amazonAffiliateProducts')) || [];
            
            // Inizializza la pagina
            document.addEventListener('DOMContentLoaded', () => {
                setTimeout(convertAmazonLinks, 1000);
                renderSavedProducts();
            });
            
            // Converti tutti i link Amazon
            function convertAmazonLinks() {
                const links = document.querySelectorAll('a[href*="amazon"], a[href*="amzn.to"]');
                let convertedCount = 0;
                
                links.forEach(link => {
                    const originalUrl = link.href;
                    
                    if (originalUrl.includes('tag=' + REFERRAL_ID)) return;
                    
                    if (originalUrl.includes('amzn.to')) {
                        fetchUnshortenedUrl(originalUrl).then(fullUrl => {
                            link.href = addReferralToUrl(fullUrl);
                            convertedCount++;
                        });
                    } else {
                        link.href = addReferralToUrl(originalUrl);
                        convertedCount++;
                    }
                });
                
                if (convertedCount > 0) {
                    console.log(`‚úÖ ${convertedCount} link convertiti con il tuo referral ID!`);
                }
            }
            
            // Aggiungi referral ID agli URL
            function addReferralToUrl(url) {
                if (url.includes('tag=')) {
                    return url.replace(/(tag=)[^&]+/, '$1' + REFERRAL_ID);
                } else {
                    const separator = url.includes('?') ? '&' : '?';
                    return url + separator + 'tag=' + REFERRAL_ID;
                }
            }
            
            // Espandi link abbreviati (amzn.to)
            async function fetchUnshortenedUrl(shortUrl) {
                try {
                    const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(shortUrl)}`);
                    const data = await response.json();
                    return data.contents.match(/href="([^"]+)/)[1];
                } catch (error) {
                    console.error("Errore nell'espansione del link:", error);
                    return shortUrl;
                }
            }
            
            // Toggle manual data input
            document.getElementById('toggle-manual-btn').addEventListener('click', function() {
                const manualInput = document.getElementById('manual-data-input');
                manualInput.style.display = manualInput.style.display === 'none' ? 'block' : 'none';
                this.textContent = manualInput.style.display === 'none' ? 
                    '+ Inserimento manuale dati' : '- Nascondi inserimento manuale';
            });
            
            // Gestione selezione categoria
            document.getElementById('product-category').addEventListener('change', function() {
                document.getElementById('product-custom-category').style.display = 
                    this.value === 'other' ? 'block' : 'none';
            });
            
            // Aggiungi prodotto da URL
            document.getElementById('add-product-btn').addEventListener('click', async function() {
                const urlInput = document.getElementById('amazon-url-input').value.trim();
                const categorySelect = document.getElementById('product-category');
                const customCategoryInput = document.getElementById('custom-category-input');
                const subcategoryInput = document.getElementById('product-subcategory').value.trim();
                
                let category = categorySelect.value;
                if (category === 'other') {
                    category = customCategoryInput.value.trim().toLowerCase().replace(/\s+/g, '-');
                    if (!category) {
                        alert("Inserisci un nome per la nuova categoria!");
                        return;
                    }
                }
                
                if (!urlInput.includes('amazon') && !urlInput.includes('amzn.to')) {
                    alert("Inserisci un URL valido di Amazon!");
                    return;
                }

                let affiliateUrl = urlInput.includes('amzn.to') 
                    ? await fetchUnshortenedUrl(urlInput) 
                    : urlInput;
                affiliateUrl = addReferralToUrl(affiliateUrl);

                const asin = affiliateUrl.match(/\/dp\/([A-Z0-9]{10})/)?.[1] || 
                             affiliateUrl.match(/\/gp\/product\/([A-Z0-9]{10})/)?.[1];

                if (!asin) {
                    alert("URL non valido: impossibile estrarre l'ASIN del prodotto.");
                    return;
                }
                
                // Estrai dati manuali se forniti
                const manualTitle = document.getElementById('product-title-input').value.trim();
                const manualImage = document.getElementById('product-image-input').value.trim();
                const manualPrice = document.getElementById('product-price-input').value.trim();
                const manualOriginalPrice = document.getElementById('product-original-price-input').value.trim();
                const manualRating = document.getElementById('product-rating-input').value.trim();
                const manualReviews = document.getElementById('product-reviews-input').value.trim();
                const hasPrime = document.getElementById('prime-checkbox').checked;
                const isTimeDeal = document.getElementById('time-deal-checkbox').checked;
                
                // Crea oggetto prodotto
                const product = {
                    asin: asin,
                    url: affiliateUrl,
                    category: category,
                    subcategory: subcategoryInput || 'Varie',
                    title: manualTitle || `Prodotto ASIN: ${asin}`,
                    image: manualImage || 'https://via.placeholder.com/200?text=Immagine+non+disponibile',
                    price: manualPrice || '‚Ç¨--,--',
                    originalPrice: manualOriginalPrice || '',
                    rating: manualRating || '',
                    reviews: manualReviews || '',
                    prime: hasPrime,
                    timeDeal: isTimeDeal,
                    added: new Date().toISOString()
                };
                
                // Salva il prodotto
                products.push(product);
                localStorage.setItem('amazonAffiliateProducts', JSON.stringify(products));
                
                // Aggiungi alla pagina
                addProductToPage(product);
                
                // Resetta il form
                document.getElementById('amazon-url-input').value = '';
                document.getElementById('product-title-input').value = '';
                document.getElementById('product-image-input').value = '';
                document.getElementById('product-price-input').value = '';
                document.getElementById('product-original-price-input').value = '';
                document.getElementById('product-rating-input').value = '';
                document.getElementById('product-reviews-input').value = '';
                document.getElementById('prime-checkbox').checked = false;
                document.getElementById('time-deal-checkbox').checked = false;
                document.getElementById('product-subcategory').value = '';
                
                alert('Prodotto aggiunto con successo!');
            });
            
            // Aggiungi prodotto alla pagina
            function addProductToPage(product) {
                // Crea la sezione categoria se non esiste
                let categorySection = document.getElementById(product.category);
                if (!categorySection) {
                    categorySection = document.createElement('div');
                    categorySection.id = product.category;
                    categorySection.className = 'category-section';
                    
                    const emojiMap = {
                        'elettronica': 'üéÆ',
                        'casa': 'üè†',
                        'libri': 'üìö',
                        'bellezza': 'üíÑ',
                        'giardino': 'üåø',
                        'sport': '‚öΩ',
                        'giochi-e-giocattoli': 'üéÆ'
                    };
                    
                    const emoji = emojiMap[product.category] || 'üõçÔ∏è';
                    
                    categorySection.innerHTML = `
                        <h2 class="category-title"><i>${emoji}</i> ${capitalizeFirstLetter(product.category.replace(/-/g, ' '))}</h2>
                        <div class="subcategory">
                            <h3>${capitalizeFirstLetter(product.subcategory)}</h3>
                            <div class="product-grid" id="grid-${product.category}-${product.subcategory}"></div>
                        </div>
                    `;
                    
                    // Inserisci prima del footer
                    document.querySelector('footer').before(categorySection);
                    
                    // Aggiungi al menu di navigazione
                    const nav = document.querySelector('.nav');
                    if (nav) {
                        const navItem = document.createElement('a');
                        navItem.href = `#${product.category}`;
                        navItem.textContent = `${emoji} ${capitalizeFirstLetter(product.category.replace(/-/g, ' '))}`;
                        nav.appendChild(navItem);
                    }
                }
                
                // Trova o crea la griglia per la sottocategoria
                let productGrid = document.getElementById(`grid-${product.category}-${product.subcategory}`);
                if (!productGrid) {
                    // Cerca se esiste gi√† una sottocategoria
                    const subcategories = categorySection.querySelectorAll('.subcategory');
                    let existingSubcategory = null;
                    
                    subcategories.forEach(sub => {
                        if (sub.querySelector('h3').textContent === product.subcategory) {
                            existingSubcategory = sub;
                        }
                    });
                    
                    if (existingSubcategory) {
                        productGrid = existingSubcategory.querySelector('.product-grid');
                    } else {
                        const newSubcategory = document.createElement('div');
                        newSubcategory.className = 'subcategory';
                        newSubcategory.innerHTML = `
                            <h3>${capitalizeFirstLetter(product.subcategory)}</h3>
                            <div class="product-grid" id="grid-${product.category}-${product.subcategory}"></div>
                        `;
                        categorySection.appendChild(newSubcategory);
                        productGrid = newSubcategory.querySelector('.product-grid');
                    }
                }
                
                // Crea la card del prodotto
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.dataset.asin = product.asin;
                
                let priceHtml = `<div class="product-price">${product.price}`;
                if (product.originalPrice) {
                    priceHtml += ` <span class="original-price">invece di ${product.originalPrice}</span>`;
                }
                priceHtml += '</div>';
                
                if (product.timeDeal) {
                    priceHtml = `<div class="product-price">A soli ${product.price} <span class='time-deal'>Offerta a tempo</span>`;
                    if (product.originalPrice) {
                        priceHtml += ` <span class="original-price">invece di ${product.originalPrice}</span>`;
                    }
                    priceHtml += '</div>';
                }
                
                let reviewsHtml = '';
                if (product.rating && product.reviews) {
                    reviewsHtml = `
                        <div class="product-reviews">
                            <span class="rating">${product.rating}</span>
                            <i class="star-icon">‚òÖ</i>
                            <span class="review-count">${product.reviews} voti</span>
                        </div>
                    `;
                }
                
                productCard.innerHTML = `
                    <button class="delete-product" onclick="deleteProduct('${product.asin}')">√ó</button>
                    <img src="${product.image}" alt="${product.title}" class="product-img" onerror="this.src='https://via.placeholder.com/200?text=Immagine+non+disponibile'">
                    <div class="product-title">${product.title}</div>
                    ${product.prime ? '<div class="prime-badge">‚úî Con Prime</div>' : ''}
                    ${reviewsHtml}
                    ${priceHtml}
                    <a href="${product.url}" class="buy-btn" target="_blank">Vedi offerta</a>
                `;
                
                productGrid.appendChild(productCard);
            }
            
            // Renderizza i prodotti salvati
            function renderSavedProducts() {
                products.forEach(product => {
                    addProductToPage(product);
                });
            }
            
            // Elimina prodotto
            function deleteProduct(asin) {
                if (confirm('Sei sicuro di voler eliminare questo prodotto?')) {
                    products = products.filter(p => p.asin !== asin);
                    localStorage.setItem('amazonAffiliateProducts', JSON.stringify(products));
                    
                    // Rimuovi dalla pagina
                    const productCard = document.querySelector(`.product-card[data-asin="${asin}"]`);
                    if (productCard) {
                        productCard.remove();
                    }
                    
                    // Controlla se la categoria √® vuota e eventualmente rimuovila
                    checkEmptyCategories();
                }
            }
            
            // Controlla categorie vuote
            function checkEmptyCategories() {
                const categorySections = document.querySelectorAll('.category-section');
                categorySections.forEach(section => {
                    const productGrids = section.querySelectorAll('.product-grid');
                    let isEmpty = true;
                    
                    productGrids.forEach(grid => {
                        if (grid.children.length > 0) {
                            isEmpty = false;
                        }
                    });
                    
                    if (isEmpty && section.id !== 'elettronica' && section.id !== 'casa' && 
                        section.id !== 'libri' && section.id !== 'bellezza' && 
                        section.id !== 'giardino' && section.id !== 'sport' && 
                        section.id !== 'giochi-e-giocattoli') {
                        section.remove();
                        
                        // Rimuovi dal menu di navigazione
                        const navItem = document.querySelector(`.nav a[href="#${section.id}"]`);
                        if (navItem) {
                            navItem.remove();
                        }
                    }
                });
            }
            
            // Utility: capitalizza la prima lettera
            function capitalizeFirstLetter(string) {
                return string.charAt(0).toUpperCase() + string.slice(1);
            }
            
            // Pulsante di conversione manuale
            document.getElementById('convert-btn').addEventListener('click', convertAmazonLinks);
        </script>

        <!-- Footer -->
        <footer>
            <div class="disclaimer">
                <h3>‚ö†Ô∏è Informativa Affiliazione Amazon</h3>
                <p><small>Questo sito partecipa al Programma di affiliazione Amazon EU. Quando acquisti tramite i nostri link, riceviamo una piccola commissione senza alcun costo aggiuntivo per te. Grazie per il supporto!</small></p>
            </div>
            <p>¬© 2025 shoppingal - Tutti i diritti riservati</p>
        </footer>
    </div>
</body>
</html>
